import{d as j,z as E,s as a,f as s,c as r,j as _,A as k,B as D,n as I,r as w,q as L,u as z,o as b,i as N,a as t,x as C,y as x,t as l,F as A,b as B,C as U,D as $,T as O,p as q,g as G,_ as J}from"./index-Bt48Nl8M.js";import{u as K}from"./taskStore-Cxv6eLKW.js";const Q=e=>{const o={year:"numeric",month:"long",day:"numeric"};return new Date(e).toLocaleDateString(void 0,o)},R={prefix:"fas",iconName:"circle-exclamation",icon:[512,512,["exclamation-circle"],"f06a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24l0 112c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-112c0-13.3 10.7-24 24-24zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},W=R,X={prefix:"fas",iconName:"hourglass-half",icon:[384,512,["hourglass-2"],"f252","M32 0C14.3 0 0 14.3 0 32S14.3 64 32 64l0 11c0 42.4 16.9 83.1 46.9 113.1L146.7 256 78.9 323.9C48.9 353.9 32 394.6 32 437l0 11c-17.7 0-32 14.3-32 32s14.3 32 32 32l32 0 256 0 32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l0-11c0-42.4-16.9-83.1-46.9-113.1L237.3 256l67.9-67.9c30-30 46.9-70.7 46.9-113.1l0-11c17.7 0 32-14.3 32-32s-14.3-32-32-32L320 0 64 0 32 0zM96 75l0-11 192 0 0 11c0 19-5.6 37.4-16 53L112 128c-10.3-15.6-16-34-16-53zm16 309c3.5-5.3 7.6-10.3 12.1-14.9L192 301.3l67.9 67.9c4.6 4.6 8.6 9.6 12.1 14.9L112 384z"]},Y={prefix:"fas",iconName:"circle-check",icon:[512,512,[61533,"check-circle"],"f058","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},Z=Y,ee={prefix:"fas",iconName:"circle",icon:[512,512,[128308,128309,128992,128993,128994,128995,128996,9679,9898,9899,11044,61708,61915],"f111","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"]},te=["title"],se=j({__name:"StatusIcon",props:{status:{}},setup(e){E.add(Z,W,X,ee);const o=e,n=a(()=>{switch(o.status){case"Completed":return"text-green-500";case"inProgress":return"text-yellow-500";case"overdue":return"text-red-500";default:return"text-gray-500"}}),p=a(()=>{switch(o.status){case"Completed":return"check-circle";case"inProgress":return"hourglass-half";case"overdue":return"exclamation-circle";case"todo":return"circle";default:return"circle"}}),u=a(()=>{switch(o.status){case"Completed":return"This project is completed.";case"inProgress":return"This project is in progress.";case"overdue":return"This project is overdue.";case"todo":return"This project is not started yet.";default:return"Status unknown."}});return(h,i)=>(s(),r("div",{class:I(n.value),title:u.value},[_(k(D),{icon:p.value},null,8,["icon"])],10,te))}}),oe={class:"flex space-x-4 overflow-x-auto"},ce=j({__name:"AdminOptions",setup(e){return(o,n)=>(s(),r("div",oe))}}),ae={class:"p-4 bg-white rounded-lg shadow"},re={class:"flex justify-between items-center"},ne={class:"flex space-x-2 mt-2"},le={key:0,class:"text-primary"},ie={key:1,class:"text-secondary"},ue={class:"flex space-x-4"},de={key:0,class:"mt-4"},pe={class:"grid grid-cols-3 gap-4"},fe=["value","max"],_e=j({__name:"ProjectItem",props:["project"],setup(e){const o=e,n=w(!1),p=()=>{n.value=!n.value},u=a(()=>n.value?"fas fa-chevron-up":"fas fa-chevron-down");L();const h=z(),i=K(),m=a(()=>{var c;return((c=h.user)==null?void 0:c.role)==="admin"||o.project.role==="leader"}),f=w([]),v=async()=>{if(o.project._id){const c=await i.fetchTasksByProject(o.project._id);console.log("The fetched Tasks on Monunt are:",c),f.value=c??[]}},V=a(()=>c=>{const d=h.getUserById(c);return console.log("The user is:",d),d==null?void 0:d.username});b(async()=>{await v(),await h.fetchAllUsers()});const T=a(()=>g.value===0?"todo":P.value===g.value?"Completed":M.value?"overdue":"inProgress"),P=a(()=>f.value.filter(c=>c.status==="done").length),g=a(()=>f.value.length),S=a(()=>f.value.reduce((c,d)=>c+d.hoursUsed,0)),M=a(()=>new Date(o.project.endDate)<new Date);return(c,d)=>{const F=N("router-link");return s(),r("li",ae,[t("div",re,[t("div",null,[_(F,{to:`/projects/${e.project._id}`,class:"text-lg font-medium text-primary hover:underline"},{default:C(()=>[x(l(e.project.name),1)]),_:1},8,["to"]),t("p",null,l(e.project.description),1),t("div",ne,[(s(!0),r(A,null,B(e.project.teamMembers,y=>(s(),r("span",{key:y._id,class:"text-sm"},[x(l(V.value(y._id))+" ",1),y.role==="leader"?(s(),r("span",le,": Leader")):(s(),r("span",ie,"(Member)"))]))),128))])]),t("div",ue,[t("p",{class:I({"text-red-500":M.value})},l(k(Q)(e.project.endDate)),3),_(se,{status:T.value},null,8,["status"]),x(),t("span",null,l(T.value),1)]),t("button",{onClick:p},[_(k(D),{icon:u.value},null,8,["icon"])])]),_(O,{name:"slide-fade"},{default:C(()=>[n.value?(s(),r("div",de,[t("div",pe,[t("div",null,[t("p",null,"Tasks: "+l(P.value)+" / "+l(g.value),1)]),t("div",null,[t("p",null,"Hours: "+l(S.value)+" / "+l(e.project.allocatedHours),1),t("progress",{value:S.value,max:e.project.allocatedHours},null,8,fe)]),t("div",null,[m.value?(s(),U(ce,{key:0,projectId:e.project._id},null,8,["projectId"])):$("",!0)])])])):$("",!0)]),_:1})])}}}),H=e=>(q("data-v-99361305"),e=e(),G(),e),he={class:"p-8"},me={class:"flex justify-between items-center mb-6"},ve=H(()=>t("h1",{class:"text-2xl font-bold text-primary"},"My Projects",-1)),xe={key:0,class:"space-y-4"},je={key:1},ge=H(()=>t("p",null,"No projects are found.",-1)),ye=[ge],ke=j({__name:"MyProjectsView",setup(e){const o=L(),n=z(),p=a(()=>{var i;return(i=n.user)==null?void 0:i._id}),u=w([]);return b(async()=>{if(p.value){const i=await o.fetchProjectByUserId(p.value);u.value=i.map(m=>({...m,showDetails:!1}))}}),(i,m)=>{const f=N("router-link");return s(),r("div",he,[t("div",me,[ve,_(f,{to:"/projects/new",class:"bg-primary text-white px-4 py-2 rounded shadow hover:bg-primary-dark"},{default:C(()=>[x(" Add New Project ")]),_:1})]),u.value.length>0?(s(),r("ul",xe,[(s(!0),r(A,null,B(u.value,v=>(s(),U(_e,{key:v._id,project:v},null,8,["project"]))),128))])):(s(),r("ul",je,ye))])}}}),Te=J(ke,[["__scopeId","data-v-99361305"]]);export{Te as default};
