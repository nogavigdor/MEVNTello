import{d as v,u as x,r as b,x as _,k as D,o as i,c as u,b as e,g as a,v as r,F as h,m as w,w as g,y as k,t as j,z as U}from"./index-DMryOHvS.js";import{u as M}from"./projectStore-KbtFoBrK.js";const V={class:"p-8"},S=e("h1",{class:"text-2xl font-bold text-primary mb-4"},"Create New Project",-1),P={class:"mb-4"},H=e("label",{for:"projectName",class:"block text-sm font-medium text-gray-700"},"Project Name",-1),N={class:"mb-4"},q=e("label",{for:"projectDescription",class:"block text-sm font-medium text-gray-700"},"Description",-1),C={class:"mb-4"},F=e("label",{for:"allocatedHours",class:"block text-sm font-medium text-gray-700"},"Allocated Hours",-1),I={class:"mb-4"},A=e("label",{for:"startDate",class:"block text-sm font-medium text-gray-700"},"Start Date",-1),B={class:"mb-4"},E=e("label",{for:"endDate",class:"block text-sm font-medium text-gray-700"},"End Date",-1),T={class:"mb-4"},L=e("label",{class:"block text-sm font-medium text-gray-700"},"Assign Team Members and Roles",-1),z=["value"],R=["onUpdate:modelValue"],G=e("option",{value:"member"},"Member",-1),J=e("option",{value:"leader"},"Leader",-1),K=[G,J],O=e("button",{type:"submit",class:"bg-primary hover:bg-primary-dark text-white font-bold py-2 px-4 rounded"},"Create Project",-1),Y=v({__name:"NewProjectView",setup(Q){const p=x(),f=M(),n=b([]),s=_({name:"",description:"",startDate:new Date,endDate:new Date,allocatedHours:0,teamMembers:[]}),l=_({}),c=b([]);D(async()=>{await p.fetchAllUsers(),n.value=p.getUsers,n.value.forEach(d=>l[d.userId]="member")});const y=async()=>{const d={...s,startDate:new Date(s.startDate),endDate:new Date(s.endDate),teamMembers:c.value.map(t=>({userId:t,role:l[t]}))};try{await f.createProject(d),alert("Project created successfully!")}catch(t){alert("Failed to create project"),console.error(t)}};return(d,t)=>(i(),u("div",V,[S,e("form",{onSubmit:g(y,["prevent"])},[e("div",P,[H,a(e("input",{type:"text",id:"projectName","onUpdate:modelValue":t[0]||(t[0]=o=>s.name=o),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[r,s.name]])]),e("div",N,[q,a(e("textarea",{id:"projectDescription","onUpdate:modelValue":t[1]||(t[1]=o=>s.description=o),rows:"3",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm"},null,512),[[r,s.description]])]),e("div",C,[F,a(e("input",{type:"number",id:"allocatedHours","onUpdate:modelValue":t[2]||(t[2]=o=>s.allocatedHours=o),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[r,s.allocatedHours,void 0,{number:!0}]])]),e("div",I,[A,a(e("input",{type:"date",id:"startDate","onUpdate:modelValue":t[3]||(t[3]=o=>s.startDate=o),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[r,s.startDate]])]),e("div",B,[E,a(e("input",{type:"date",id:"endDate","onUpdate:modelValue":t[4]||(t[4]=o=>s.endDate=o),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[r,s.endDate]])]),e("div",T,[L,(i(!0),u(h,null,w(n.value,o=>(i(),u("div",{key:o.userId,class:"flex items-center space-x-3 mb-2"},[a(e("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=m=>c.value=m),value:o.userId},null,8,z),[[k,c.value]]),e("span",null,j(o.username),1),a(e("select",{"onUpdate:modelValue":m=>l[o.userId]=m},K,8,R),[[U,l[o.userId]]])]))),128))]),O],32)]))}});export{Y as default};
